# 快速启动指南

## 🚀 立即运行

在项目目录中运行：

```powershell
dotnet run
```

或者双击运行：
```powershell
.\bin\Debug\net8.0-windows\Storyboard.exe
```

如果出现构建提示“文件被占用”，通常是程序正在运行中（Storyboard.exe 被锁定）；关闭程序后再执行 `dotnet build` 即可。

## 📝 使用流程

### 0. 顶部导航
应用顶部提供三个导航：
- **分镜管理**：主功能页面（表格编辑/生成/预览）
- **使用文档**：内置说明文档（无需打开外部文件）
- **密钥配置**：用于填写第三方服务密钥（当前以界面为主）

### 1. 上传视频
点击右上角 **“📁 上传视频”** 按钮，选择一个视频文件（支持 mp4, avi, mov, mkv）

### 2. AI 自动分析
- 系统会显示 "AI 正在分析视频..." 的加载提示
- 分析完成后，表格会自动填充分镜数据

### 3. 编辑参数
点击表格中的任意单元格即可编辑：
- 时长
- 首帧/尾帧提示词
- 镜头类型
- 核心画面
- 动作指令
- 场景设定
- 选用模型（下拉选择）

### 4. 调整顺序
拖拽 **镜头号列**（#号列）可以调整分镜顺序，系统会自动重新编号

### 5. 生成图像
- 点击 **"🎨 生成首帧"** 按钮生成首帧图像
- 点击 **"🎨 生成尾帧"** 按钮生成尾帧图像
- 按钮会显示 "⏳ 生成中..." 状态
- 完成后会显示缩略图，并在缩略图下方提供：
	- **🔍 查看大图**：打开大图预览窗口
	- **📂 文件位置**：在资源管理器中定位该文件
- 也可以直接点击缩略图打开大图预览

### 6. 生成视频
- 首帧和尾帧都生成后，点击 **"🎬 生成视频"** 按钮
- 系统会根据设定参数生成视频片段
- 生成完成后会显示视频封面（默认使用首帧作为封面），并提供：
	- **▶ 观看视频**：使用系统默认播放器打开视频
	- **📂 文件位置**：在资源管理器中定位该文件

### 7. 查看进度
底部状态栏显示：
- **总时长**: 所有分镜的总时长
- **已生成图像**: x /（分镜数 × 2）
- **已生成视频**: x / 分镜数

## 🎨 界面特性

### 表格功能
- ✅ 横向滚动查看所有列
- ✅ 镜头号列固定在左侧
- ✅ 单击单元格可编辑
- ✅ 鼠标悬停行高亮
- ✅ 选中行背景变色
- ✅ 首帧/尾帧/视频三列为“内容卡片式”展示（缩略图/封面 + 操作按钮）

### 拖拽排序
- 点击并按住镜头号列（#）
- 拖动到目标位置
- 释放鼠标完成排序
- 所有镜头号自动更新

## ⚙️ 当前状态

**注意**: 当前版本使用模拟数据进行演示：

- ✅ UI 完全可用
- ✅ 编辑功能完全可用
- ✅ 拖拽排序完全可用
- ⚠️ 视频分析返回示例数据
- ⚠️ 图像生成返回占位符路径（延迟 3 秒模拟）
- ⚠️ 视频生成返回占位符路径（延迟 5 秒模拟）

## 🔧 下一步开发

集成真实的 AI 服务：
1. 修改 `Services/VideoAnalysisService.cs` - 集成视频分析 API
2. 修改 `Services/ImageGenerationService.cs` - 集成图像生成 API
3. 修改 `Services/VideoGenerationService.cs` - 集成视频生成 API

## 📦 依赖项

项目已自动安装以下 NuGet 包：
- `CommunityToolkit.Mvvm` - MVVM 工具包
- `Microsoft.Extensions.DependencyInjection` - 依赖注入

## 🐛 常见问题

**Q: 为什么点击生成按钮没反应？**
A: 当前版本使用模拟延迟，请等待 3-5 秒后会看到状态变化。

**Q: 如何添加新的 AI 模型选项？**
A: 编辑 `MainWindow.xaml` 文件，在 ComboBox 的 ItemsSource 中添加新的模型名称。

**Q: 表格列太多，如何查看？**
A: 使用鼠标滚轮或拖动底部滚动条进行横向滚动。
