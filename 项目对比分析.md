# 项目对比分析：分镜大师 vs AI视频导演助手

## 一、项目概述对比

### 分镜大师（我们的项目）
- **定位**：本地桌面应用，专业视频分镜工作台
- **技术栈**：.NET 8 + Avalonia（跨平台桌面应用）
- **核心流程**：视频导入 → 帧提取 → AI分析 → 图片/视频生成 → 批量任务 → 最终合成
- **数据存储**：SQLite本地数据库 + 文件系统
- **目标用户**：需要本地化、专业化视频制作工具的用户

### AI视频导演助手（别人的工具）
- **定位**：Web应用，自动化AI导演工具
- **技术栈**：Web前端（推测React/Vue）+ Vercel部署
- **核心流程**：草稿输入 → 意图分析 → 导演脚本生成 → 剪辑建议 → 分镜图生成
- **数据存储**：IndexedDB浏览器本地存储
- **目标用户**：自媒体创作者、上班族、AI爱好者

---

## 二、核心功能对比

| 功能维度 | 分镜大师 | AI视频导演助手 |
|---------|---------|---------------|
| **输入方式** | 视频文件导入 + 帧提取 | 文本草稿/资料输入 |
| **AI分析** | 视觉AI分析视频帧 | 文本意图分析 + 脚本生成 |
| **分镜生成** | 基于视频帧的AI分析 | 基于文本的AI脚本生成 |
| **图片生成** | 首尾帧图片生成（火山引擎等） | 场景参考图生成（多种风格） |
| **视频生成** | 完整视频生成功能 | 无视频生成（仅脚本和图片） |
| **剪辑功能** | 视频合成和导出 | AI剪辑建议（Auto-Edit Plan） |
| **批量处理** | 完整的任务队列系统 | 无明确批量处理机制 |
| **本地化** | 完全本地化桌面应用 | Web应用 + 浏览器存储 |
| **多AI提供商** | 支持火山、通义千问、OpenAI等 | 推荐Gemini 3，支持BYOK |

---

## 三、架构设计对比

### 分镜大师的架构优势
1. **分层架构**：Domain → Application → Infrastructure → UI，清晰的职责分离
2. **MVVM模式**：响应式UI，数据绑定，易于维护
3. **依赖注入**：完整的IoC容器，服务解耦
4. **仓储模式**：数据访问抽象，易于测试
5. **工作单元模式**：事务管理，数据一致性保证

### AI视频导演助手的架构特点
1. **Prompt驱动**：核心逻辑由4组Prompt驱动，代码量少
2. **轻量级**：Web应用，无需安装，即开即用
3. **浏览器存储**：IndexedDB，数据完全本地化
4. **模块化Prompt**：意图分析、导演、剪辑师、场景生成独立

---

## 四、值得借鉴的核心亮点

### 🌟 1. Prompt工程体系（重点借鉴）

AI视频导演助手的最大亮点是**系统化的Prompt设计**，这是我们项目可以直接借鉴的：

#### 1.1 意图分析Prompt
```
Role: Creative Producer and Requirements Analyst
Task: 提炼核心创作意图
Output:
  1. Core Message (为什么拍)
  2. Target Audience (给谁看)
  3. Key Plot Points (重点是什么)
  4. Suggested Tone/Mood (整体基调)
```

**借鉴价值**：
- 我们当前直接分析视频帧，缺少对用户创作意图的理解
- 可以在项目创建时增加"意图分析"步骤，让用户输入创作目标
- 帮助AI更好地理解用户需求，生成更符合预期的分镜

#### 1.2 总导演Prompt（4个变量系统）

```
I. 导演人设 (DIRECTOR)
   - 情绪标签：Excited, Serious, Contemplative
   - 台词风格：自然口语化，包含停顿[pause]

II. 摄影参数 (CINEMATOGRAPHY)
   - 景别：Wide(建立场景), Medium(信息), Close-up(情感)
   - 运镜：Static(稳定), Pan(揭示), Zoom In(聚焦)
   - 灯光：Natural, Cyberpunk, Studio Softbox

III. 分镜逻辑 (STORYBOARD)
   - Screencast：软件、网站、代码界面
   - Infographic：数据、图表、抽象概念
   - B-Roll：环境、产品特写、氛围镜头
   - A-Roll：仅用于情感连接或开场/结尾

IV. 连贯性 (CONTINUITY)
   - 场景转换逻辑
   - 道具细节统一
```

**借鉴价值**：
- 我们的Shot实体已有类似字段（ShotType, CameraMovement, LightingType等）
- 但缺少**系统化的Prompt模板**来指导AI生成
- 可以将这4个变量系统整合到我们的PromptManagementService中

#### 1.3 剪辑大师Prompt

```
Role: Viral Video Editor (ACE) with FULL CREATIVE AUTHORITY
Powers:
  1. REORDER：前置高能画面（Cold Open）
  2. TRIM：激进剪辑，快速切换
  3. DELETE：删除无价值场景
  4. J-CUTS：音频先行或延续

Output: Timeline with actions (TRIM, MOVE, KEEP)
```

**借鉴价值**：
- 我们当前缺少"剪辑优化"功能
- 可以新增一个"AI剪辑建议"服务，分析现有分镜并提供优化建议
- 输出：重排序建议、时长调整、转场方式、删除建议

#### 1.4 场景生成Prompt模板组

```
内置风格：
- Cinematic (Default)
- Anime Style
- Storyboard Sketch
- Cyberpunk/Neon
- Corporate Vector

可扩展：用户自定义风格模板
```

**借鉴价值**：
- 我们当前的图片生成参数较为分散
- 可以增加"风格预设"功能，预定义常用的参数组合
- 用户可以保存和复用自己的风格模板

---

### 🌟 2. 视觉多样性约束（Show, Don't Tell）

AI视频导演助手强调：
- **限制A-Roll时长**：避免"talking head"视频
- **强制分类规则**：Screencast、Infographic、B-Roll、A-Roll
- **场景节奏**：避免连续2个以上A-Roll场景

**借鉴价值**：
- 我们可以在AI分析时增加"场景类型检测"
- 在生成分镜时，自动平衡不同类型镜头的比例
- 提供"视觉多样性评分"，帮助用户优化分镜

---

### 🌟 3. 语言和格式强制约束

```
GLOBAL CONSTRAINTS:
1. LANGUAGE: script, description, emotion 必须使用简体中文
2. FORMAT: 严格输出JSON格式
3. VISUAL DIVERSITY: 不要创建"talking head"视频
```

**借鉴价值**：
- 我们的Prompt模板应该明确指定输出语言和格式
- 增加JSON Schema验证，确保AI输出符合预期
- 在PromptManagementService中增加"全局约束"配置

---

### 🌟 4. 用户体验设计

#### 4.1 渐进式功能开关
- 启用意图优化（可选，消耗更多token）
- 自动生成分镜图（可选，节省API费用）

**借鉴价值**：
- 我们可以在项目设置中增加"AI分析深度"选项
- 提供"快速模式"和"深度模式"
- 让用户在成本和质量之间自主选择

#### 4.2 A-Roll/B-Roll筛选
- 快速按场景类型筛选镜头
- 方便按场景拍摄内容

**借鉴价值**：
- 我们的ShotListView可以增加"按类型筛选"功能
- 增加"拍摄清单"视图，按场景类型分组显示

#### 4.3 风格切换
- 如果分镜场景参考不喜欢，可以换风格试试

**借鉴价值**：
- 我们可以为每个Shot增加"重新生成（换风格）"功能
- 保留历史生成记录（我们已有ShotAsset实现）

---

### 🌟 5. BYOK（Bring Your Own Key）

- 用户使用自己的API Key
- 数据完全本地化，隐私安全

**借鉴价值**：
- 我们已经实现了BYOK（appsettings.json配置）
- 可以增加UI界面让用户更方便地配置API Key
- 我们的ApiKeyViewModel已经有基础，可以进一步完善

---

## 五、我们的独特优势

### ✅ 1. 完整的视频处理能力
- **FFmpeg集成**：视频导入、帧提取、元数据分析、最终合成
- **4种帧提取模式**：固定数量、动态间隔、固定间隔、关键帧检测
- **视频生成**：完整的视频生成功能（对方只有脚本和图片）

### ✅ 2. 专业的批量任务系统
- **JobQueueService**：并发任务执行、重试逻辑、进度跟踪
- **任务类型**：分析、图片生成、视频生成、合成
- **任务状态管理**：Queued, Running, Retrying, Succeeded, Failed, Canceled
- **任务历史**：持久化任务历史（JSON，最近200条）

### ✅ 3. 本地化桌面应用
- **跨平台**：Avalonia支持Windows、macOS、Linux
- **性能优势**：本地处理，无需网络延迟
- **数据安全**：SQLite本地数据库，完全离线可用

### ✅ 4. 完善的数据模型
- **Project → Shot → ShotAsset**：清晰的数据关系
- **丰富的Shot字段**：专业参数（构图、灯光、镜头类型、运镜方式等）
- **历史记录**：每个Shot可以保留多次生成记录

### ✅ 5. 多AI提供商支持
- **Provider Pattern**：可插拔的AI提供商
- **已支持**：火山引擎、通义千问、OpenAI、智谱、文心
- **灵活配置**：运行时选择提供商和模型

### ✅ 6. 专业的架构设计
- **分层架构**：清晰的职责分离
- **MVVM模式**：响应式UI
- **依赖注入**：服务解耦，易于测试
- **仓储模式**：数据访问抽象

---

## 六、具体改进建议

### 🎯 高优先级（立即可做）

#### 1. 增强Prompt工程体系
**实施方案**：
- 在`Infrastructure/AI/PromptManagementService`中增加4个核心Prompt模板：
  - `IntentAnalysis.txt`：意图分析
  - `DirectorMaster.txt`：总导演（包含4个变量）
  - `EditMaster.txt`：剪辑大师
  - `SceneStylePresets.json`：场景风格预设
- 在`Shared/Models`中增加对应的DTO：
  - `IntentAnalysisResult`
  - `DirectorScript`
  - `EditPlan`
  - `SceneStylePreset`

**预期效果**：
- AI生成的分镜质量显著提升
- 用户可以更好地控制生成结果
- 减少AI输出的不确定性

#### 2. 增加"意图分析"步骤
**实施方案**：
- 在`App/ViewModels/ProjectManagementViewModel`中增加"创建项目向导"
- 第一步：输入项目名称和创作意图（Core Message, Target Audience, Tone）
- 调用`IAiShotService.AnalyzeIntent()`分析意图
- 将意图分析结果保存到Project实体（增加新字段）

**预期效果**：
- AI更好地理解用户需求
- 生成的分镜更符合用户预期
- 提升用户体验

#### 3. 增加"AI剪辑建议"功能
**实施方案**：
- 在`Application/Abstractions`中增加`IEditSuggestionService`接口
- 在`Infrastructure/AI`中实现`EditSuggestionService`
- 在`App/ViewModels`中增加`EditSuggestionViewModel`
- 在`App/Views`中增加`EditSuggestionView`
- 功能：分析现有分镜，提供重排序、时长调整、转场建议

**预期效果**：
- 帮助用户优化分镜结构
- 提升视频吸引力和留存率
- 增加产品差异化竞争力

#### 4. 增加"风格预设"功能
**实施方案**：
- 在`Shared/Models`中增加`StylePreset`模型
- 在`Infrastructure/Services`中增加`StylePresetService`
- 在UI中增加"风格库"面板，展示预设风格
- 用户可以一键应用风格到Shot，也可以保存自定义风格

**预期效果**：
- 简化用户操作
- 提升生成效率
- 增强用户体验

---

### 🎯 中优先级（短期规划）

#### 5. 增加"视觉多样性分析"
**实施方案**：
- 在`Application/Abstractions`中增加`IVisualDiversityAnalyzer`接口
- 分析项目中A-Roll、B-Roll、Screencast、Infographic的比例
- 提供"视觉多样性评分"和优化建议
- 在UI中显示评分和建议

**预期效果**：
- 帮助用户避免"talking head"视频
- 提升视频质量
- 增加专业性

#### 6. 增强Shot类型分类
**实施方案**：
- 在`Domain/Entities/Shot`中增加`SceneCategory`枚举：
  - A-Roll（人物口播）
  - B-Roll（环境氛围）
  - Screencast（屏幕录制）
  - Infographic（图表数据）
- 在AI分析时自动分类
- 在UI中按类型筛选和分组

**预期效果**：
- 更清晰的分镜组织
- 方便按场景拍摄
- 提升工作效率

#### 7. 增加"全局约束"配置
**实施方案**：
- 在`appsettings.json`中增加`AIServices.GlobalConstraints`配置：
  - `OutputLanguage`：输出语言（简体中文、英文等）
  - `OutputFormat`：输出格式（JSON、Markdown等）
  - `VisualDiversityRules`：视觉多样性规则
- 在Prompt渲染时自动注入全局约束

**预期效果**：
- 确保AI输出符合预期
- 减少后处理工作
- 提升稳定性

---

### 🎯 低优先级（长期规划）

#### 8. 增加Web版本
**实施方案**：
- 使用Blazor WebAssembly或React重写前端
- 后端使用ASP.NET Core Web API
- 保留桌面版作为专业版，Web版作为轻量版

**预期效果**：
- 降低使用门槛
- 扩大用户群体
- 增加产品线

#### 9. 增加协作功能
**实施方案**：
- 增加项目分享功能
- 增加多人协作编辑
- 增加评论和审批流程

**预期效果**：
- 适应团队协作场景
- 增加企业用户
- 提升产品价值

---

## 七、技术债务和改进点

### 我们需要改进的地方

#### 1. Prompt管理不够系统化
- **现状**：Prompt模板分散，缺少统一管理
- **改进**：参考对方的4组Prompt体系，建立系统化的Prompt库

#### 2. 缺少用户意图理解
- **现状**：直接分析视频帧，不理解用户创作意图
- **改进**：增加意图分析步骤，让AI更好地理解用户需求

#### 3. 缺少剪辑优化功能
- **现状**：只有基础的视频合成，没有剪辑建议
- **改进**：增加AI剪辑建议功能，提升视频质量

#### 4. 用户体验可以更友好
- **现状**：功能强大但操作复杂
- **改进**：增加向导、预设、一键操作等简化功能

---

## 八、总结

### 对方的核心优势
1. **Prompt工程体系**：系统化的4组Prompt设计，这是最值得借鉴的
2. **轻量级**：Web应用，即开即用，无需安装
3. **用户体验**：渐进式功能、风格切换、A-Roll/B-Roll筛选

### 我们的核心优势
1. **完整的视频处理能力**：FFmpeg集成、视频生成、最终合成
2. **专业的批量任务系统**：并发执行、重试逻辑、进度跟踪
3. **本地化桌面应用**：跨平台、高性能、数据安全
4. **完善的架构设计**：分层架构、MVVM、依赖注入

### 最值得借鉴的3点
1. **系统化的Prompt工程体系**（意图分析、总导演4变量、剪辑大师、场景风格）
2. **视觉多样性约束**（Show, Don't Tell，限制A-Roll，强制分类）
3. **用户体验优化**（渐进式功能、风格预设、一键操作）

### 行动计划
1. **立即实施**：增强Prompt工程体系，增加意图分析
2. **短期规划**：增加AI剪辑建议，增加风格预设
3. **长期规划**：增加Web版本，增加协作功能

---

## 九、附录：关键代码位置

### 需要修改的文件
1. `Infrastructure/AI/PromptManagementService.cs` - 增加4组核心Prompt
2. `Application/Abstractions/IAiShotService.cs` - 增加意图分析接口
3. `Infrastructure/AI/AIServiceManager.cs` - 实现意图分析
4. `Domain/Entities/Project.cs` - 增加意图分析字段
5. `Domain/Entities/Shot.cs` - 增加SceneCategory枚举
6. `App/ViewModels/ProjectManagementViewModel.cs` - 增加创建项目向导
7. `Shared/Models/` - 增加IntentAnalysisResult、EditPlan等DTO

### 需要新增的文件
1. `Application/Abstractions/IEditSuggestionService.cs` - 剪辑建议服务接口
2. `Infrastructure/AI/EditSuggestionService.cs` - 剪辑建议服务实现
3. `Application/Abstractions/IVisualDiversityAnalyzer.cs` - 视觉多样性分析接口
4. `Infrastructure/Services/StylePresetService.cs` - 风格预设服务
5. `App/ViewModels/EditSuggestionViewModel.cs` - 剪辑建议ViewModel
6. `App/Views/EditSuggestionView.axaml` - 剪辑建议View
7. `Shared/Models/StylePreset.cs` - 风格预设模型

---

**文档生成时间**：2026-01-18
**分析对象**：分镜大师 vs AI视频导演助手
**核心结论**：两个项目各有优势，我们应该借鉴对方的Prompt工程体系和用户体验设计，同时保持我们在视频处理和架构设计上的优势。
